import type { MetroConfig } from 'metro-config'

export interface VibecodeMetroOptions {
	/** Enable cache configuration (default: true) */
	enableCache?: boolean
	/** Local cache directory (default: ~/.metro-cache) */
	cacheDir?: string
	/** Cache version string (default: "1") */
	cacheVersion?: string
	/** HTTP/2 cache server endpoint */
	httpEndpoint?: string
	/** HTTP request timeout in ms (default: 30000) */
	httpTimeout?: number
	/** HTTP/2 connection pool size (default: 64) */
	httpMaxConnections?: number
	/** Max concurrent HTTP requests (default: 256) */
	httpMaxConcurrent?: number
}

/**
 * Wrap a Metro config with Vibecode enhancements.
 */
export function withVibecodeMetro(
	config: MetroConfig,
	options?: VibecodeMetroOptions,
): MetroConfig
